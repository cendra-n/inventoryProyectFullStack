<div class="container mt-4">

  <h2 class="text-center">Movimientos de Inventario</h2>
  <hr>

  <button class="btn btn-secondary mb-3" (click)="goToBackInventories()">
    ⬅ Atrás
  </button>

  <!-- LOADING -->
  <div *ngIf="loading" class="text-center">
    <div class="spinner-border" role="status"></div>
  </div>


<div class="card mb-4">
  <div class="card-body">
    <h5 class="mb-3">Filtros de búsqueda</h5>

    <div class="row g-3 align-items-end">

      <!-- PRODUCTO -->
      <div class="col-md-4">
        <label class="form-label">Producto</label>
        <select
          class="form-select"
          [(ngModel)]="productId">
          <option [ngValue]="null">Todos</option>
          <option *ngFor="let p of products" [ngValue]="p.id">
            {{ p.name }}
          </option>
        </select>
      </div>

      <!-- FECHA DESDE -->
      <div class="col-md-3">
        <label class="form-label">Desde</label>
        <input
          type="datetime-local"
          class="form-control"
          [(ngModel)]="startDate">
      </div>

      <!-- FECHA HASTA -->
      <div class="col-md-3">
        <label class="form-label">Hasta</label>
        <input
          type="datetime-local"
          class="form-control"
          [(ngModel)]="endDate">
      </div>

      <!-- BOTONES -->
      <div class="col-md-2 d-flex gap-2">
        <button
          class="btn btn-primary w-100"
          (click)="search()"
          [disabled]="loading">
          Buscar
        </button>

        <button
          class="btn btn-secondary w-100"
          (click)="clearFilters()"
          [disabled]="loading">
          Limpiar
        </button>
      </div>

    </div>
  </div>
</div>

  <!-- EMPTY -->
  <div *ngIf="!loading && movements.length === 0" class="alert alert-info">
    No hay movimientos registrados.
  </div>

</div>





  <!-- TABLA -->
  <div class="table-responsive" style="max-height: 420px; overflow-y: auto;">
      <table class="table table-dark table-hover align-middle">
        <thead class="table-dark">
          <tr>
            <th>ID</th>
            <th>Cantidad</th>
            <th>Tipo</th>
            <th>Fecha</th>
            <th>ID de Producto</th>
            <th>Nombre del producto</th>
          </tr>
        </thead>

        <tbody>
          <tr *ngFor="let i of movements">
            <td>{{ i.id }}</td>
            <td>{{ i.quantity }}</td>
            <td>{{ i.type }}</td>
            <td>{{ i.date }}</td>
            <td>{{ i.productId }}</td>
            <td>{{ i.productName }}</td>

             
          </tr>
        </tbody>
      </table>
  </div> 


